###第一章 基础知识

1. 每一种微处理器，由于硬件设计和内部结构的不同，就需要用不同的电平脉冲来控制，使它工作。所以每一种微处理器都要自己的机器指令集，也就是机器语言。

2. 汇编语言的主体是汇编指令。汇编指令和机器指令的差别在于指令的表示方法上。汇编指令是机器指令便于记忆的书写格式。

3. 寄存器，是CPU中可以存储数据的器件，一个CPU中可以有多个寄存器。

4. 编译器，将汇编指令转换为机器指令的翻译程序。

5. 汇编语言的组成：
   + 汇编指令（核心）：机器码的助记符，有对应的机器码；
   + 伪指令：没有对应的机器码，由编译器执行，计算机并不执行；
   + 其他符号：如+，-，\*，/等，由编译器识别，没有对应的机器码；


6. 指令和数据是应用上的概念。在内存或磁盘上，指令和数据没有任何区别，都是二进制的信息。CPU在工作时候把有的信息看做指令，有的信息看做数据，为同样的信息赋予了不同的意义。

7. 存储器被划分为若干个存储单元，每个单元从0开始顺序编号。微型机存储器的存储单元可以存储一个Byte，即8个bit，一个存储器有128个存储单元，可以存储128个Byte。微机的存储器的容量是以字节为最小单位来计算的。

8. 单位换算：1KB=1024B,1MB=1024KB,1GB=1024MB,1TB=1024GB

9. CPU对存储器的读写：存储单元的编号可以看做存储单元在存储器中的地址，CPU要从内存中读取数据，首先要指定存储单元的地址。在一台微机中，不只有存储器这一器件。CPU在读写数据时还要指明，要对哪个器件进行操作，进行什么操作，是从中读出数据，还是写入数据。

10. CPU读写数据需要进行3类信息交互：
    + 存储单元的地址(地址信息);
    + 器件的选择，读或写的命令(控制信息);
    + 读或写的数据(数据信息);


11. CPU是通过什么将地址，数据和控制信息传到存储器芯片中的呢？
    >电子计算机能处理、传输的信息都是点信号，电信号是通过导线传送。在计算机中专门有连接CPU和其他芯片的导线，通常称为总线。总线从物理上讲，就是多根导线的集合。根据传送信息的不同，总线从逻辑上分为3类，**地址总线**、**控制总线**和**数据总线**。

12. 如何命令计算机进行数据的读写呢？
    >要让一个计算机或者微处理器工作，应向它输入能够驱动它进行工作的电平信息（机器码）。对于8086CPU，下面的机器码，能够完成从3号单元读取数据：机器码：101000010000001100000000 含义：从3号存储单元读取数据送入寄存器AX

13. 地址总线，CPU是通过地址总线来指定存储单元的。可见地址总线上能传送多少个不同的信息，CPU就可以对多少个存储单元进行寻址。

14. 地址总线寻址的原理：在电子计算机中，一根导线可以传送的稳定状态只有两种，高电平和地电平。用二进制表示就是1或者0，10根导线可以传送的10位二进制数据。而10为位二进制可以表示2的10次方个不同的数据。一个CPU有N根地址总线，则可以说这个CPU的地址总线的宽度为N，该CPU最多可以寻找2的N次方个内存单元。

15. 数据总线，CPU与内存或其他器件之间的数据传输是通过总线来进行的。**数据总线的宽度决定了CPU和外界的数据传输速度。** 例如，8根数据总线一次可以传送一个8bit的二进制数据。

16. 控制总线，CPU对外界器件的控制是通过控制总线来进行的。控制总线是一些不同的控制线的集合。有多少根控制总线，就意味着，CPU提供了对外部器件的多少种控制。所以 **控制总线的宽度决定了CPU对外部器件的控制能力**。例如，内存的读写命令是由几根控制总线综合发出的，其中一根称为"读信号输出"的控制总线负责由CPU向外界传送读信号，CPU向该控制总线输出低电平表示将要读取数据；另一根称为"写信号输出"的控制总线则负责传送写信号。

17. 每一个CPU芯片都由许多管脚，这些管脚和总线相连。也可以说，这些管脚引出总线。一个CPU可以引出3种总线的宽度标识了这个CPU的不同方面的性能：
    + 地址总线的宽度决定了CPU的寻址能力；
    + 数据总线的宽度决定了CPU对其他器件进行数据传送时的一次数据传送量；
    + 控制总线的宽度决定了CPU对系统中其他器件的控制能力。


18. 什么是内存地址空间呢？
    >一个CPU的地址总线宽度为N，那么可以寻址的2^N个内存单元，这2^N个可寻到的内存单元就构成了这个CPU的内存地址空间。

19. 主板，每一台PC机中，都有一个主板，主板上有核心器件和一些主要的器件，这些器件通过总线(地址总线，数据总线和控制总线)相连。这些器件有CPU，存储器，外围芯片组，扩展插槽等。

14. 计算机系统中，所有可用程序控制其工作的设备，必须受到CPU的控制。CPU对外部设备都不能直接控制。直接控制这些设备进行工作的是插在扩展槽上的接口卡。扩展插槽通过总线和CPU相连，所以接口卡也通过总线同CPU相连。CPU可以直接控制这些接口卡，从而实现CPU对外部设备的间接控制。

15. 存储器芯片：随机存储器(RAM)和只读存储器(ROM)。随机存储器可读可写，但必须带电存储，关机后存储的内容丢失；只读存储器只能读取不能写入，关机后其中的内容不丢失。
    + 随机存储器：用于存放供CPU使用的绝大部分程序和数据；
    + 装在BIOS(基本输入和输出系统)的ROM，BIOS是由主板和各类接口卡厂商提供的系统软件，可以通过它利用硬件设备进行最基本的输入和输出。在主板和某些接口卡上插有存储相应BIOS的ROM；
    + 接口卡上的RAM，某些接口卡上需要对大批量的输入和输出数据进行暂时存储，在其上装有RAM。最典型的就是显示卡上的RAM（显存）。


22. CPU在操作相应的硬件时，把它们都当作内存来对待，把它们总的看做一个由若干个存储单元组成的逻辑存储器，这个逻辑存储器就是我们所说的内存地址空间。地址总线所能表示的地址不只是代表主存储器的地址，而是所有CPU可操纵的设备的地址空间。所有的物理存储器被看做是一个有若干个存储单元组成的逻辑存储器，每个物理存储器在这个逻辑存储器中占有一个地址段，即一段地址空间。CPU在这段空间中读取数据，实际上就是在相应的物理存储器中读写数据。内存地址空间的大小受CPU地址总线宽度的限制。

23. 基于一个计算机硬件系统编程时，必须知道这个系统中的内存地址空间的分配情况。因为我们想在某类存储器中读写数据时，必须知道它的第一个单元的地址和最后一个单元的地址，才能保证读写操作是在预期的存储器中进行。

###第二章 寄存器

1. 一个典型的CPU有运算器，控制器，寄存器等器件组成，这些器件靠内部总线相连。内部总线实现CPU内部各个器件之间的联系，外部总线实现CPU和主板上其他器件的联系。
    + 运算器进行信息处理；
    + 寄存器进行信息存储；
    + 控制器控制各种器件进行工作；
    + 内部总线连接各种器件，在它们之间进行数据传送；


2. 寄存器，是CPU中程序员可以用指令读写的部件。程序员通过改变各种寄存器中的内容来实现对CPU的控制。不同的CPU，寄存器的个数和结构是不相同的。

3. 8086CPU的所有寄存器都是16位的，可以存放两个字节。AX,BX,CX,DX这四个寄存器通常用来存放一般性的数据，被称为 **通用寄存器**。

4. 8086CPU的上一代中的寄存器都是8位的，为了保证兼容性，使原来基础上的程序稍加修改就可以运行在8086上，8086CPU的AX,BX,CX,DX这4个寄存器可分为两个独立使用的8位寄存器来使用；AX可分为AH(高位)和AL(低位)，其他一样。

5. 出于对兼容性的考虑，8086CPU可以一次性处理以下两种尺寸的数据：
    + 字节：byte，一个字节由8bit组成，可以存储在8位寄存器中；
    + 字：word，一个字由两个字节组成，这两个字节分别称为这个字的高位字节和低位字节；可以存储在16位寄存器中。


6. 任何数据，在计算机中都是以二进制的形式存放的。十六进制数的一位相当于二进制数的四位，例如0100111000100000，可以表示成4(0100)，E(1110)，2(0100)，0(0000)四位十六进制的数。由于一个内存单元可存放8位数据，CPU中寄存器又可存放n个8位数据，计算机中的数据大多是由1~N个8位数据构成的。

7. 通过汇编指令控制CPU进行工作：(寄存器与汇编指令不区分大小写)
    + mov ax,18: 将18送入寄存器AX，即AX=18
    + add ax, 8: 将寄存器AX中的数值加上8，并存储在AX中，即AX=AX+8


8. 在进行数据传送或运算时，要注意指令的两个操作对象的位数应当是一致的。例如，mov ax,bl是错误的指令；而mov al,18H则是正确的指令。

9. 物理地址，CPU访问内存单元时，要给出内存单元的地址。所有的内存单元构成的储存空间是一个一维的线性空间，每一个内存单元在这个空间中的都有唯一的地址，这个唯一的地址就是 **物理地址**。CPU通过地址总线送入寄存器的，必须是一个内存单元的物理地址。在CPU向地址总线上发出物理地址之前，必须要在内部先形成这个物理地址。不同的CPU可以有不同的形成物理地址的方式。

10. 8086CPU是16位结构的CPU，在8086内部，能够一次性处理，传送，暂时存储的信息的最大长度是16位的。内存单元的地址在送上地址总线之前，必须在CPU中处理，传输，暂时存放，对于16位的CPU，能够一次性处理，传输，暂时存储16位的地址。然而，8086CPU有20位的地址总线，达到了1M的寻址能力。如果从8086CPU的内部结构来看，那么它只能送出16位的地址，表现出的寻址能力为64KB。所以，8086CPU采用一种内部用两个16位地址合成的方法来形成一个20位的物理地址。地址加法器的算法：基础地址(段地址*16)+偏移地址=物理地址。

11. 段的概念，内存中并没有分段，段的划分来自于CPU，由于8086CPU用 **基础地址+偏移地址=物理地址** 的方式给出内存单元的物理地址，使得我们可以用分段的方式来管理内存。在编程时可以根据需要，将若干个地址连续的内存单元看做一个段，用段地址*16定位段的起始地址，用偏移地址定位段中的内存单元。一个段的长度最大为64KB。CPU可以用不同的段地址和偏移地址形成相同的物理地址。

13. 段寄存器，段地址在8086CPU的段寄存器中存放。8086CPU有的哥段寄存器：CS,DS,SS,ES。当CPU要访问内存时，由这4个段寄存器提供内存单元的段地址。

14. CS和IP是8086CPU中两个关键的寄存器，指示了CPU当前要读取指令的地址。CS为代码段寄存器，IP为指令指针寄存器。地址=M(CS)\*16+N(IP);

15. CPU什么时候将信息看做指令？CPU将CS:IP指向的内存单元中的内容看做指令，因为在任何时候，CPU将CS，IP中的内容当做指令的段地址和偏移地址，用它们合成指令的物理地址，到内存中读取指令码，执行。如果说，内存中的一段信息曾被CPU执行过的话，那么，它所在的内存单元必然被CS:IP指向过。

16. 修改CS，IP的指令，在CPU中，程序员能够用指令来读写的部件只有寄存器，程序员可以通过改变寄存器中的内容来实现对CPU的控制。8086CPU必须提供相应的指令。mov指令不能用于修改CS，IP的寄存器。能够改变CS,IP的指令被统称为 **转移指令** 。例如jmp指令：jmp 段地址：偏移地址。

17. 代码段，对于8086PC机，在编程时，可以根据需要，将一组内存单元定义为一个段。将长度为N(N<=64KB)的一组代码，存在一组地址连续，起始地址为16的倍数的内存单元中，可以认为这段内存是用来存放代码的，从而定义了一个代码段。

18. 代码段如何执行？将一段内存当做代码段，仅仅是我们在编程时的一种安排，CPU并不会由于这种安排，就自动地将我们定义的代码段中的指令当做指令来执行。CPU只认被CS:IP指向的内存单元中的内容为指令。所以，要让CPU执行我们放在代码段中的指令，必须将CS:IP指向所定义的代码段中的第一条指令的首地址。
